<html>
	<head>
		<link rel='stylesheet' href='css/jquery-ui-1.10.3.custom.css'>
		<link rel='stylesheet' href='css/estilo.css'>
		<script type="text/javascript" src='js/jquery.js'></script>
		<script type="text/javascript" src='js/jquery-ui.js'></script>
		<script type="text/javascript" src='js/jquery.ui.datepicker.br.js'></script>
		<script type="text/javascript" src='js/jquery.maskedinput.js'></script>
		<script type="text/javascript" src='js/jquery.livequery.min.js'></script>
		<script type="text/javascript" src='js/jquery.validate.js'></script>
		<script type="text/javascript" src='js/dados_teste.js'></script>
		<script type="text/javascript">
			var transportes = new Array();
			
			$(function() {
				$("#form").validate({
					rules: {
						estado_destino: 'required',
						cidade_destino: 'required',
						local: 'required',
						empresa: 'required',
						tipo_transporte: 'required',
						estado_restaurante: 'required',
						cidade_restaurante: 'required',
						restaurante: 'required',
						data_restaurante: 'required',
						hora_restaurante: 'required',
						estado_hotel: 'required',
						cidade_hotel: 'required',
						hotel: 'required',
						data_hotel: 'required',
						hora_hotel: 'required'
					},
					errorPlacement: function(error, element) {
						return false;
					}
				});
				
				$("#buscar_cliente").autocomplete({
					source: clientes,
					minLength: 3,
					select: function(event, ui) {
						$("#lista_clientes").fadeIn();
						var linha = $(adicionar_cliente(ui.item.value,ui.item.cpf,ui.item.rg));
						linha.hide();
						$("#lista_clientes tr :last").after(linha);
						linha.fadeIn('slow');
						linha.switchClass("add_linha","linha",500);
						atualizar_transportes();
					},
					close: function() {
						$("#buscar_cliente").val('');
					}
				}).data("ui-autocomplete")._renderItem = function(ul, item) {
					return $("<li>")
					.append("<a>"+item.value+" | CPF: "+item.cpf+" | RG: "+item.rg+"</a>")
					.appendTo(ul);
				};

				$(".btn_adicionar").button({
					icons: {
						primary: "ui-icon-plus"
					}
				});
				$(".explicacao").button();
				
				$(".btn_remover").livequery(function() {
					$(this).button();
				});
				$("span").livequery(function() {
					$(this).disableSelection();
				});
				
				$("#tipo_transporte").change(function() {
					switch ($(this).val()) {
						case "1":
							var html;
							html += "<option value=''>Selecione</option>";
							$(empresas_onibus).each(function(i) {
								html += "<option value='"+empresas_onibus[i]+"'>"+empresas_onibus[i]+"</option>";
							});
							$("#empresa").html(html);
						break;
						case "2":
							var html;
							html += "<option value=''>Selecione</option>";
							$(empresas_aviao).each(function(i) {
								html += "<option value='"+empresas_aviao[i]+"'>"+empresas_aviao[i]+"</option>";
							});
							$("#empresa").html(html);
						break;
					}
				});

				$("#add_destino").click(function() {
					if ($("#estado_destino").valid() && $("#cidade_destino").valid() && $("#local").valid()) {
						var estado = $("#estado_destino :selected").text();
						var cidade = $("#cidade_destino :selected").text();
						var local = $("#local").val();
						$("#lista_destinos").fadeIn();
						var linha = $(adicionar_destino(estado,cidade,local));
						linha.hide();
						$("#lista_destinos tr :last").after(linha);
						linha.fadeIn('slow');
						linha.switchClass("add_linha","linha",500);
					}
				});
				
				$("#add_transporte").click(function() {
					if ($("#tipo_transporte").valid() && $("#empresa").valid()) {
						var empresa = $("#empresa :selected").val();
						$("#lista_transportes").fadeIn();
						var linha = $(adicionar_transporte(empresa));
						linha.hide();
						$("#lista_transportes tr :last").after(linha);
						linha.fadeIn('slow');
						linha.switchClass("add_linha","linha",500);
						transportes[transportes.length] = empresa;
						atualizar_transportes();
					}
				});

				$("#add_restaurante").click(function() {
					if ($("#estado_restaurante").valid() && $("#cidade_restaurante").valid() && $("#restaurante").valid() && $("#data_restaurante").valid() && $("#hora_restaurante").valid()) {
						var estado = $("#estado_restaurante :selected").text();
						var cidade = $("#cidade_restaurante :selected").text();
						var restaurante = $("#restaurante :selected").text();
						var data = $("#data_restaurante").val();
						var hora = $("#hora_restaurante").val();
						$("#lista_restaurantes").fadeIn();
						var linha = $(adicionar_restaurante(estado,cidade,restaurante,data,hora));
						linha.hide();
						$("#lista_restaurantes tr :last").after(linha);
						linha.fadeIn('slow');
						linha.switchClass("add_linha","linha",500);
					}
				});

				$("#add_hotel").click(function() {
					if ($("#estado_hotel").valid() && $("#cidade_hotel").valid() && $("#hotel").valid() && $("#data_hotel").valid() && $("#hora_hotel").valid()) {
						var estado = $("#estado_hotel :selected").text();
						var cidade = $("#cidade_hotel :selected").text();
						var hotel = $("#hotel :selected").text();
						var data = $("#data_hotel").val();
						var hora = $("#hora_hotel").val();
						$("#lista_hoteis").fadeIn();
						var linha = $(adicionar_hotel(estado,cidade,hotel,data,hora));
						linha.hide();
						$("#lista_hoteis tr :last").after(linha);
						linha.fadeIn('slow');
						linha.switchClass("add_linha","linha",500);
					}
				});

				$(".interrogacao").click(function() {
					switch ($(this).attr('id')) {
						case 'principal':
							var titulo = "Principal";
							var texto = explicacao_principal;
						break;
						case 'destinos':
							var titulo = "Destinos";
							var texto = explicacao_destinos;
						break;
						case 'transportes':
							var titulo = "Transportes";
							var texto = explicacao_transportes;
						break;
						case 'clientes':
							var titulo = "Clientes";
							var texto = explicacao_clientes;
						break;
						case 'restaurantes':
							var titulo = "Restaurantes";
							var texto = explicacao_restaurantes;
						break;
						case 'hoteis':
							var titulo = "Hotéis";
							var texto = explicacao_hoteis;
						break;
					}
					$("#dialogo").dialog("option","title",titulo);
					$("#dialogo").html(texto);
					$("#dialogo").dialog("open");
				});

				$("#dialogo").dialog({
					dialogClass: "no-close",
					autoOpen: false,
					modal: true,
					draggable: false,
					resizable: false,
					minWidth: 500,
					buttons: [{
						text:"Ok",
						click: function() {
							$(this).dialog("close");
						}
					}]
				});
				
				$(".data").mask('99/99/9999');
				$(".data").datepicker();
				$(".hora").mask('99:99');
				
				$("#nome_viagem").val('');
				$("#data_saida").val('');
				$("#tipo_transporte").val('');
			});

			function adicionar_cliente(nome,cpf,rg) {
				var html;
				html = "<tr class='add_linha' style='display:none'>";
				html += "	<td>"+nome+"</td>";
				html += "	<td>"+cpf+"</td>";
				html += "	<td>"+rg+"</td>";
				html += "	<td align='center'><select name='transporte_cliente'><option value=''>Selecione</option></select></td>";
				html += "	<td align='center'><span class='btn_remover'>X</span></td>";
				html += "</tr>";
				return html;
			}

			function adicionar_destino(estado,cidade,local) {
				var html;
				html = "<tr class='add_linha' style='display:none'>";
				html += "	<td>"+estado+"</td>";
				html += "	<td>"+cidade+"</td>";
				html += "	<td>"+local+"</td>";
				html += "	<td align='center'><span class='btn_remover'>X</span></td>";
				html += "</tr>";
				return html;
			}
			
			function adicionar_transporte(empresa) {
				var html;
				html = "<tr class='add_linha' style='display:none'>";
				html += "	<td>"+empresa+"</td>";
				html += "	<td align='center'><span class='btn_remover'>X</span></td>";
				html += "</tr>";
				return html;
			}

			function atualizar_transportes() {
				var html;
				html += "<option value=''>Selecione</option>";
				$(transportes).each(function(i) {
					html += "<option>"+transportes[i]+"</option>";
				});
				$(".btn_remover").livequery(function() {
					$(this).button();
				});
				$("select[name=transporte_cliente]").html(html);
			}
			
			function adicionar_restaurante(estado,cidade,restaurante,data,hora) {
				var html;
				html = "<tr class='add_linha' style='display:none'>";
				html += "	<td>"+estado+"</td>";
				html += "	<td>"+cidade+"</td>";
				html += "	<td>"+restaurante+"</td>";
				html += "	<td>"+data+"</td>";
				html += "	<td>"+hora+"</td>";
				html += "	<td align='center'><span class='btn_remover'>X</span></td>";
				html += "</tr>";
				return html;
			}

			function adicionar_hotel(estado,cidade,hotel,data,hora) {
				var html;
				html = "<tr class='add_linha' style='display:none'>";
				html += "	<td>"+estado+"</td>";
				html += "	<td>"+cidade+"</td>";
				html += "	<td>"+hotel+"</td>";
				html += "	<td>"+data+"</td>";
				html += "	<td>"+hora+"</td>";
				html += "	<td align='center'><span class='btn_remover'>X</span></td>";
				html += "</tr>";
				return html;
			}
		</script>
	</head>
	<body>
		<div id='dialogo'></div>
		<form id='form'>
			<div class='titulo_tela'>Cadastro de Viagem</div>
			<div class='conteudo'>
				<fieldset>
					<span class='titulo_dados'>Informa&ccedil;&otilde;es Principais <img class='interrogacao' id='principal' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Nome da Viagem: </label>
					<input type='text' name='nome_viagem' id='nome_viagem'>
					<label class='label_campo'>Data de Sa&iacute;da: </label>
					<input type='text' name='data_saida' id='data_saida' class='data' size='10' >
				</fieldset>
				<fieldset>
					<span class='titulo_dados'>Destinos <img class='interrogacao' id='destinos' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Estado: </label>
					<select name='estado_destino' id='estado_destino'>
						<option value=''>Selecione</option>
						<option value='1'>RJ</option>
					</select>
					<label class='label_campo'>Cidade: </label>
					<select name='cidade_destino' id='cidade_destino'>
						<option value=''>Selecione</option>
						<option value='1'>Rio de Janeiro</option>
					</select>
					<label class='label_campo'>Local: </label>
					<input type='text' name='local' id='local'>
					<span class='btn_adicionar' id='add_destino'>Adicionar</span>
					<br>
					<table id='lista_destinos' class='lista'>
						<thead>
							<tr>
								<td width='7%'>Estado</td>
								<td width='20%'>Cidade</td>
								<td width='63%'>Local</td>
								<td width='10%'>Remover</td>
							</tr>
						</thead>
					</table>
				</fieldset>
				<fieldset>
					<span class='titulo_dados'>Transportes <img class='interrogacao' id='transportes' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Tipo de Transporte: </label>
					<select name='tipo_transporte' id='tipo_transporte'>
						<option value=''>Selecione</option>
						<option value='1'>&Ocirc;nibus</option>
						<option value='2'>Avi&atilde;o</option>
					</select>
					<label class='label_campo'>Empresa: </label>
					<select name='empresa' id='empresa'>
						<option value=''>Selecione o tipo de transporte</option>
					</select>
					<span class='btn_adicionar' id='add_transporte'>Adicionar</span>
					<br>
					<table id='lista_transportes' class='lista'>
						<thead>
							<tr>
								<td width='50%'>Empresa</td>
								<td width='9%'>Remover</td>
							</tr>
						</thead>
					</table>
				</fieldset>
				<fieldset>
					<span class='titulo_dados'>Clientes <img class='interrogacao' id='clientes' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Cliente: </label>
					<input type='text' name='buscar_cliente' id='buscar_cliente'>
					<br>
					<table id='lista_clientes' class='lista'>
						<thead>
							<tr>
								<td width='50%'>Nome</td>
								<td width='12%'>CPF</td>
								<td width='11%'>RG</td>
								<td width='20%'>Transporte</td>
								<td width='9%'>Remover</td>
							</tr>
						</thead>
					</table>
				</fieldset>
				<fieldset>
					<span class='titulo_dados'>Restaurantes <img class='interrogacao' id='restaurantes' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Estado: </label>
					<select name='estado_restaurante' id='estado_restaurante'>
						<option value=''>Selecione</option>
						<option value='1'>RJ</option>
					</select>
					<label class='label_campo'>Cidade: </label>
					<select name='cidade_restaurante' id='cidade_restaurante'>
						<option value=''>Selecione</option>
						<option value='1'>Rio de Janeiro</option>
					</select>
					<label class='label_campo'>Restaurante: </label>
					<select name='restaurante' id='restaurante'>
						<option value=''>Selecione</option>
						<option value='1'>Nome do Restaurante</option>
					</select>
					<br>
					<br>
					<label class='label_campo'>Data: </label>
					<input type='text' name='data_restaurante' id='data_restaurante' size='10' class='data'>
					<label class='label_campo'>Hora: </label>
					<input type='text' name='hora_restaurante' id='hora_restaurante' size='5' class='hora'>
					<span class='btn_adicionar' id='add_restaurante'>Adicionar</span>
					<br>
					<table id='lista_restaurantes' class='lista'>
						<thead>
							<tr>
								<td width='7%'>Estado</td>
								<td width='20%'>Cidade</td>
								<td width='46%'>Restaurante</td>
								<td width='9%'>Data</td>
								<td width='8%'>Hora</td>
								<td width='10%'>Remover</td>
							</tr>
						</thead>
					</table>
				</fieldset>
				<fieldset>
					<span class='titulo_dados'>Hot&eacute;is <img class='interrogacao' id='hoteis' src='css/images/interrogacao.png' /></span>
					<label class='label_campo'>Estado: </label>
					<select name='estado_hotel' id='estado_hotel'>
						<option value=''>Selecione</option>
						<option value='1'>RJ</option>
					</select>
					<label class='label_campo'>Cidade: </label>
					<select name='cidade_hotel' id='cidade_hotel'>
						<option value=''>Selecione</option>
						<option value='1'>Rio de Janeiro</option>
					</select>
					<label class='label_campo'>Hotel: </label>
					<select name='hotel' id='hotel'>
						<option value=''>Selecione</option>
						<option value='1'>Nome do Hotel</option>
					</select>
					<label class='label_campo'>Data: </label>
					<input type='text' name='data_hotel' id='data_hotel' size='10' class='data'>
					<label class='label_campo'>Hora: </label>
					<input type='text' name='hora_hotel' id='hora_hotel' size='5' class='hora'>
					<span class='btn_adicionar' id='add_hotel'>Adicionar</span>
					<br>
					<table id='lista_hoteis' class='lista'>
						<thead>
							<tr>
								<td width='7%'>Estado</td>
								<td width='20%'>Cidade</td>
								<td width='46%'>Hotel</td>
								<td width='9%'>Data</td>
								<td width='8%'>Hora</td>
								<td width='10%'>Remover</td>
							</tr>
						</thead>
					</table>
				</fieldset>
			</div>
		</form>
	</body>
</html>